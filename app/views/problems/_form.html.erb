<%= nested_form_for(@problem) do |f| %>
    <% if @problem.errors.any? %>
    <div id="error_explanation">
    <h2><%= pluralize(@problem.errors.count, "error") %> prohibited this problem from being saved:</h2>

    <ul>
        <% @problem.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
    <% end %>
    </ul>
    </div>
<% end %>

<div class="field">
    <%= f.label :visible_state %><br>
    <%= f.select :visible_state, [["[0]Public", "0"],
    ["[1]Public during contest", "1"], ["[2]Invisible", "2"]] %>
</div>
<div class="field">
    <%= f.label :problem_type %><br>
    <%= f.select :problem_type, [["[0]Batch Judge", "0"],
    ["[1]Special Judge", "1"], ["[2]Interactive", "2"]] %>
</div>
<div class="field">
    <%= f.label :name %><br>
    <%= f.text_field :name %>
</div>
<div class="field">
    <%= f.label :description %><br>
    <%= f.text_area :description %>
</div>
<div class="field">
    <%= f.label :input %><br>
    <%= f.text_area :input %>
</div>
<div class="field">
    <%= f.label :output %><br>
    <%= f.text_area :output %>
</div>
<div class="field">
    <%= f.label :example_input %><br>
    <%= f.text_area :example_input %>
</div>
<div class="field">
    <%= f.label :example_output %><br>
    <%= f.text_area :example_output %>
</div>
<div class="field">
    <%= f.label :hint %><br>
    <%= f.text_area :hint %>
</div>
<% if @problem.problem_type == 1 %>
  <div class="field">
    <%= f.label :sjcode, "Special Judge Code" %><br>
    <%= f.text_area :sjcode %>
  </div>
<% elsif @problem.problem_type == 2 %>
  <div class="field">
    <%= f.label :interlib, 'Interactive Library ( #include "lib' + @problem.id.to_s.rjust(4, '0') + '.h" )' %><br>
    <%= f.text_area :interlib %>
  </div>
<% end %>
<div class="field">
    <%= f.label :source %><br>
    <%= f.text_area :source %>
</div>

<div class="field">
  <%= f.label :tag_list, "Tags (saperate by commas)" %><br>
  <%= f.text_field :tag_list %>
</div>

<%= f.label :testdata_sets, "Testdata Sets (testdata no. starts from 0)" %><br>
<%= f.fields_for :testdata_sets do |t| %>
    <div class="field">
       <%= t.label :from %>
       <%= t.number_field :from, :min => 0, :max => @problem.testdata.size - 1 %>
       <%= t.label :to %>
       <%= t.number_field :to, :min => 0, :max => @problem.testdata.size - 1 %>
       <%= t.label :score %>
       <%= t.number_field :score, :in => 0..100 %>
       <%= t.link_to_remove "Remove this range" %>
    </div>
<% end %>
<p><%= f.link_to_add "Add a range", :testdata_sets %></p>

<div class="actions">
    <%= f.submit %>
</div>
<% end %>
